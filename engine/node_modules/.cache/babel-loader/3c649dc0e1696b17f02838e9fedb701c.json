{"ast":null,"code":"import _slicedToArray from \"/Users/mac/Desktop/oxo/engine/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Desktop/oxo/engine/src/Pages/Database/Table.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport MUIDataTable from \"mui-datatables\";\nimport { loadDatabase } from \"./Redux/actions\";\nimport { useAuth0 } from \"../../App/react-auth0-spa\";\nimport { driverColumns, ownerColumns, connectionColumns, vehicleColumns, matchColumns, waitlistColumns } from \"./dataColumns\";\n\nfunction Table(props) {\n  const _useAuth = useAuth0(),\n        getTokenSilently = _useAuth.getTokenSilently;\n\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        token = _useState2[0],\n        setToken = _useState2[1];\n\n  const urlIndex = props.location.pathname.lastIndexOf(\"/\") + 1;\n  const currentTable = props.location.pathname.slice(urlIndex);\n  useEffect(() => {\n    const fetchDatabaseList = async () => {\n      const newToken = await getTokenSilently();\n      setToken(newToken);\n      props.dispatchLoadDatabase(newToken, currentTable, 0, 0);\n    };\n\n    fetchDatabaseList();\n  }, []);\n  const dataTableMap = {\n    connection: {\n      name: \"Conection\",\n      columns: connectionColumns\n    },\n    driver: {\n      name: \"Driver\",\n      columns: driverColumns\n    },\n    match: {\n      name: \"Match\",\n      columns: matchColumns\n    },\n    owner: {\n      name: \"Owner\",\n      columns: ownerColumns\n    },\n    vehicle: {\n      name: \"Vehicle\",\n      columns: vehicleColumns\n    },\n    waitlist: {\n      name: \"Waitlist\",\n      columns: waitlistColumns\n    }\n  };\n  const dataTableOptions = {\n    filterType: \"checkbox\",\n    selectableRows: \"single\",\n    pagination: true,\n    print: false,\n    expandableRows: true\n  };\n\n  const populateTable = () => {\n    return React.createElement(MUIDataTable, {\n      title: dataTableMap[currentTable].name,\n      data: props.databaseEntries,\n      columns: dataTableMap[currentTable].columns,\n      options: dataTableOptions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, populateTable());\n}\n\nconst mapStateToProps = state => {\n  return {\n    databaseEntries: state.database.databaseEntries\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dispatchLoadDatabase: (token, tableName, page, pageSize) => dispatch(loadDatabase(token, tableName, page, pageSize))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Table);","map":{"version":3,"sources":["/Users/mac/Desktop/oxo/engine/src/Pages/Database/Table.tsx"],"names":["React","useState","useEffect","connect","MUIDataTable","loadDatabase","useAuth0","driverColumns","ownerColumns","connectionColumns","vehicleColumns","matchColumns","waitlistColumns","Table","props","getTokenSilently","token","setToken","urlIndex","location","pathname","lastIndexOf","currentTable","slice","fetchDatabaseList","newToken","dispatchLoadDatabase","dataTableMap","connection","name","columns","driver","match","owner","vehicle","waitlist","dataTableOptions","filterType","selectableRows","pagination","print","expandableRows","populateTable","databaseEntries","mapStateToProps","state","database","mapDispatchToProps","dispatch","tableName","page","pageSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport MUIDataTable, { MUIDataTableOptions } from \"mui-datatables\";\nimport { loadDatabase } from \"./Redux/actions\";\nimport { useHistory } from \"react-router-dom\";\nimport { useAuth0 } from \"../../App/react-auth0-spa\";\nimport {\n\tdriverColumns,\n\townerColumns,\n\tconnectionColumns,\n\tvehicleColumns,\n\tmatchColumns,\n\twaitlistColumns\n} from \"./dataColumns\"\n\ninterface TableProps {\n\tdatabaseEntries: any[];\n\tdispatchLoadDatabase: any;\n\tlocation: any;\n}\n\nfunction Table(props: TableProps): React.ReactElement {\n\tconst { getTokenSilently } = useAuth0();\n\tconst [token, setToken] = useState();\n\tconst urlIndex = props.location.pathname.lastIndexOf(\"/\") + 1;\n\tconst currentTable = props.location.pathname.slice(urlIndex);\n\n\tuseEffect(() => {\n\t\tconst fetchDatabaseList = async () => {\n\t\t\tconst newToken = await getTokenSilently();\n\t\t\tsetToken(newToken);\n\n\t\t\tprops.dispatchLoadDatabase(newToken, currentTable, 0, 0);\n\t\t};\n\t\tfetchDatabaseList();\n\t}, []);\n\n\tconst dataTableMap: any = {\n\t\tconnection: {\n\t\t\tname: \"Conection\",\n\t\t\tcolumns: connectionColumns\n\t\t},\n\t\tdriver: {\n\t\t\tname: \"Driver\",\n\t\t\tcolumns: driverColumns\n\t\t},\n\t\tmatch: {\n\t\t\tname: \"Match\",\n\t\t\tcolumns: matchColumns\n\t\t},\n\t\towner: {\n\t\t\tname: \"Owner\",\n\t\t\tcolumns: ownerColumns\n\t\t},\n\t\tvehicle: {\n\t\t\tname: \"Vehicle\",\n\t\t\tcolumns: vehicleColumns\n\t\t},\n\t\twaitlist: {\n\t\t\tname: \"Waitlist\",\n\t\t\tcolumns: waitlistColumns\n\t\t}\n\t}\n\n\tconst dataTableOptions: MUIDataTableOptions = {\n\t\tfilterType: \"checkbox\",\n\t\tselectableRows: \"single\",\n\t\tpagination: true,\n\t\tprint: false,\n\t\texpandableRows: true\n\t};\n\n\tconst populateTable = () => {\n\t\treturn (\n\t\t\t<MUIDataTable\n\t\t\t\ttitle={dataTableMap[currentTable].name}\n\t\t\t\tdata={props.databaseEntries}\n\t\t\t\tcolumns={dataTableMap[currentTable].columns}\n\t\t\t\toptions={dataTableOptions}\n\t\t\t/>\n\t\t)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{populateTable()}\n\t\t</div>\n\t)\n}\n\nconst mapStateToProps = (state: any) => {\n\treturn {\n\t\tdatabaseEntries: state.database.databaseEntries\n\t}\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n\treturn {\n\t\tdispatchLoadDatabase: (token: string, tableName: string, page: number, pageSize: number) => dispatch(loadDatabase(token, tableName, page, pageSize))\n\t}\n}\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(Table);"]},"metadata":{},"sourceType":"module"}